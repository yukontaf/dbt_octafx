version: 2
semantic_models:
  - name: uninstall_events
    model: ref('appsflyer_uninstall_events_report')
    description: "A semantic model representing detailed tracking of uninstall events from AppsFlyer."
    defaults:
      agg_time_dimension: event_time
    entities:
      - name: appsflyer_id
        type: primary
    measures:
      - name: events_count
        expr: 1
        agg: count
      - name: event_revenue_usd
        expr: 1
        agg: sum  
    dimensions:
      - name: event_time
        type: time
        type_params:
          time_granularity: day
      - name: media_source
        type: categorical
      - name: campaign
        type: categorical
      - name: region
        type: categorical
      - name: country_code
        type: categorical

metrics:
  - name: events_count
    type: simple
    label: total count of uninstall events
    type_params:
      measure: events_count
  - name: revenue_usd_sum
    type: simple
    label: total revenue in USD
    type_params:
      measure: event_revenue_usd
